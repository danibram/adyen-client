{"version":3,"sources":["../src/Client.js"],"names":[],"mappings":";;;;;;;;;;;;;;;AAQA;;;;;;;;IAEqB,M;AACjB,oBAAa,GAAb,EAAkB;AAAA;;AAAA,YACT,QADS,GACuB,GADvB,CACT,QADS;AAAA,YACC,QADD,GACuB,GADvB,CACC,QADD;AAAA,YACW,QADX,GACuB,GADvB,CACW,QADX;;;AAGd,aAAK,QAAL,GAAgB,QAAhB;AACA,aAAK,QAAL,GAAgB,QAAhB;AACA,aAAK,QAAL,GAAgB,QAAhB;;AAEA,aAAK,YAAL,GAAoB,IAApB;AACA,aAAK,aAAL,GAAqB,IAArB;AACH;;;;6BAEK,G,EAAK;AACP,gBAAI,WAAW,CAAC,KAAK,QAAN,EAAgB,KAAK,QAArB,EAA+B,IAA/B,CAAoC,GAApC,CAAf;AACA,gBAAI,QAAQ,IAAI,MAAJ,CAAW,QAAX,EAAqB,QAArB,CAA8B,QAA9B,CAAZ;;AAEA,gBAAI,OAAJ,CAAY,eAAZ,IAA+B,WAAW,KAA1C;;AAEA,mBAAO,GAAP;AACH;;;kCAEU,M,EAAQ,I,EAAM;AACrB,mBAAO;AACH,wBAAQ,MADL;AAEH,qBAAK,KAAK,QAAL,GAAgB,IAFlB;AAGH,yBAAS;AACL,oCAAgB;AADX,iBAHN;AAMH,sBAAM,MANH;AAOH,yBAAS;AAPN,aAAP;AASH;;;sCAEc,I,EAAM,O,EAAS;AAC1B,mBAAO;AACH,yBAAS,OADN;AAEH,sBAAM,IAFH;AAGH,8BAAc,KAAK,aAHhB;AAIH,6BAAa,KAAK;AAJf,aAAP;AAMH;;;oCAEY,M,EAAQ,I,EAAM;AAAA;;AACvB,mBAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACpC,oBAAI,IAAI,MAAK,IAAL,CAAU,MAAK,SAAL,CAAe,MAAf,EAAuB,IAAvB,CAAV,CAAR;;AAEA,sBAAK,YAAL,GAAoB,CAApB;AACA,sBAAK,aAAL,GAAqB,IAArB;;AAEA,qCAAM,CAAN,EACK,IADL,CACU,UAAC,QAAD,EAAc;AAChB,0BAAK,aAAL,GAAqB,QAArB;AACA,2BAAO,QAAQ,MAAK,aAAL,CAAmB,SAAS,IAA5B,EAAkC,IAAlC,CAAR,CAAP;AACH,iBAJL,EAIO,UAAC,QAAD,EAAc;AACb,0BAAK,aAAL,GAAqB,QAArB;AACA,2BAAO,OAAO,MAAK,aAAL,CAAmB,SAAS,IAA5B,EAAkC,KAAlC,CAAP,CAAP;AACH,iBAPL,EAQK,KARL,CAQW,UAAC,QAAD,EAAc;AACjB,2BAAO,OAAO,MAAK,aAAL,CAAmB,SAAS,IAA5B,EAAkC,KAAlC,CAAP,CAAP;AACH,iBAVL;AAWH,aAjBM,CAAP;AAkBH;;;;;;kBA7DgB,M","file":"Client.js","sourcesContent":["/*\r\n * adyen-client\r\n *\r\n *\r\n * Copyright (c) 2015 Daniel Biedma Ramos\r\n * Licensed under the MIT license.\r\n */\r\n\r\nimport axios from 'axios'\r\n\r\nexport default class Client {\r\n    constructor (cfg) {\r\n        let {username, password, endpoint} = cfg\r\n\r\n        this.username = username\r\n        this.password = password\r\n        this.endpoint = endpoint\r\n\r\n        this._lastRequest = null\r\n        this._lastResponse = null\r\n    }\r\n\r\n    auth (req) {\r\n        var userPass = [this.username, this.password].join(':');\r\n        var token = new Buffer(userPass).toString('base64');\r\n\r\n        req.headers['Authorization'] = 'Basic ' + token\r\n\r\n        return req\r\n    }\r\n\r\n    createReq (params, path) {\r\n        return {\r\n            method: 'post',\r\n            url: this.endpoint + path,\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            data: params,\r\n            timeout: 20000\r\n        }\r\n    }\r\n\r\n    composeOutput (data, success) {\r\n        return {\r\n            success: success,\r\n            data: data,\r\n            lastResponse: this._lastResponse,\r\n            lastRequest: this._lastRequest\r\n        }\r\n    }\r\n\r\n    makeRequest (params, path) {\r\n        return new Promise((resolve, reject) => {\r\n            var r = this.auth(this.createReq(params, path))\r\n\r\n            this._lastRequest = r;\r\n            this._lastResponse = null;\r\n\r\n            axios(r)\r\n                .then((response) => {\r\n                    this._lastResponse = response;\r\n                    return resolve(this.composeOutput(response.data, true));\r\n                }, (response) => {\r\n                    this._lastResponse = response;\r\n                    return reject(this.composeOutput(response.data, false));\r\n                })\r\n                .catch((response) => {\r\n                    return reject(this.composeOutput(response.data, false));\r\n                });\r\n        })\r\n    };\r\n}\r\n"]}