{"version":3,"sources":["../src/Client.js"],"names":[],"mappings":";;;;;;;;;;;;;;;AAQA;;;;;;;;IAEqB,M;AACjB,oBAAa,GAAb,EAAkB;AAAA;;AAAA,YACT,QADS,GACuB,GADvB,CACT,QADS;AAAA,YACC,QADD,GACuB,GADvB,CACC,QADD;AAAA,YACW,QADX,GACuB,GADvB,CACW,QADX;;;AAGd,aAAK,QAAL,GAAgB,QAAhB;AACA,aAAK,QAAL,GAAgB,QAAhB;AACA,aAAK,QAAL,GAAgB,QAAhB;;AAEA,aAAK,YAAL,GAAoB,IAApB;AACA,aAAK,aAAL,GAAqB,IAArB;AACH;;;;6BAEK,G,EAAK;AACP,gBAAI,WAAW,CAAC,KAAK,QAAN,EAAgB,KAAK,QAArB,EAA+B,IAA/B,CAAoC,GAApC,CAAf;AACA,gBAAI,QAAQ,IAAI,MAAJ,CAAW,QAAX,EAAqB,QAArB,CAA8B,QAA9B,CAAZ;;AAEA,gBAAI,OAAJ,CAAY,eAAZ,IAA+B,WAAW,KAA1C;;AAEA,mBAAO,GAAP;AACH;;;kCAEU,M,EAAQ,I,EAAM;AACrB,mBAAO;AACH,wBAAQ,MADL;AAEH,qBAAK,KAAK,QAAL,GAAgB,IAFlB;AAGH,yBAAS;AACL,oCAAgB;AADX,iBAHN;AAMH,sBAAM,MANH;AAOH,yBAAS;AAPN,aAAP;AASH;;;sCAEc,I,EAAM,O,EAAS;AAC1B,mBAAO;AACH,yBAAS,OADN;AAEH,sBAAM,IAFH;AAGH,8BAAc,KAAK,aAHhB;AAIH,6BAAa,KAAK;AAJf,aAAP;AAMH;;;oCAEY,M,EAAQ,I,EAAM;AAAA;;AACvB,mBAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACpC,oBAAI,IAAI,MAAK,IAAL,CAAU,MAAK,SAAL,CAAe,MAAf,EAAuB,IAAvB,CAAV,CAAR;;AAEA,sBAAK,YAAL,GAAoB,CAApB;AACA,sBAAK,aAAL,GAAqB,IAArB;;AAEA,qCAAM,CAAN,EACK,IADL,CACU,UAAC,QAAD,EAAc;AAChB,0BAAK,aAAL,GAAqB,QAArB;AACA,2BAAO,QAAQ,MAAK,aAAL,CAAmB,SAAS,IAA5B,EAAkC,IAAlC,CAAR,CAAP;AACH,iBAJL,EAIO,UAAC,QAAD,EAAc;AACb,0BAAK,aAAL,GAAqB,QAArB;AACA,2BAAO,OAAO,MAAK,aAAL,CAAmB,SAAS,IAA5B,EAAkC,KAAlC,CAAP,CAAP;AACH,iBAPL,EAQK,KARL,CAQW,UAAC,QAAD,EAAc;AACjB,2BAAO,OAAO,MAAK,aAAL,CAAmB,SAAS,IAA5B,EAAkC,KAAlC,CAAP,CAAP;AACH,iBAVL;AAWH,aAjBM,CAAP;AAkBH;;;;;;kBA7DgB,M","file":"Client.js","sourcesContent":["/*\n * adyen-client\n *\n *\n * Copyright (c) 2015 Daniel Biedma Ramos\n * Licensed under the MIT license.\n */\n\nimport axios from 'axios'\n\nexport default class Client {\n    constructor (cfg) {\n        let {username, password, endpoint} = cfg\n\n        this.username = username\n        this.password = password\n        this.endpoint = endpoint\n\n        this._lastRequest = null\n        this._lastResponse = null\n    }\n\n    auth (req) {\n        var userPass = [this.username, this.password].join(':');\n        var token = new Buffer(userPass).toString('base64');\n\n        req.headers['Authorization'] = 'Basic ' + token\n\n        return req\n    }\n\n    createReq (params, path) {\n        return {\n            method: 'post',\n            url: this.endpoint + path,\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            data: params,\n            timeout: 20000\n        }\n    }\n\n    composeOutput (data, success) {\n        return {\n            success: success,\n            data: data,\n            lastResponse: this._lastResponse,\n            lastRequest: this._lastRequest\n        }\n    }\n\n    makeRequest (params, path) {\n        return new Promise((resolve, reject) => {\n            var r = this.auth(this.createReq(params, path))\n\n            this._lastRequest = r;\n            this._lastResponse = null;\n\n            axios(r)\n                .then((response) => {\n                    this._lastResponse = response;\n                    return resolve(this.composeOutput(response.data, true));\n                }, (response) => {\n                    this._lastResponse = response;\n                    return reject(this.composeOutput(response.data, false));\n                })\n                .catch((response) => {\n                    return reject(this.composeOutput(response.data, false));\n                });\n        })\n    };\n}\n"]}