{"version":3,"sources":["../src/Client.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;IAUqB,MAAM;AACvB,aADiB,MAAM,CACV,GAAG,EAAE;8BADD,MAAM;;YAEd,QAAQ,GAAwB,GAAG,CAAnC,QAAQ;YAAE,QAAQ,GAAc,GAAG,CAAzB,QAAQ;YAAE,QAAQ,GAAI,GAAG,CAAf,QAAQ;;AAEjC,YAAI,CAAC,QAAQ,GAAG,QAAQ,CAAA;AACxB,YAAI,CAAC,QAAQ,GAAG,QAAQ,CAAA;AACxB,YAAI,CAAC,QAAQ,GAAG,QAAQ,CAAA;;AAExB,YAAI,CAAC,YAAY,GAAG,IAAI,CAAA;AACxB,YAAI,CAAC,aAAa,GAAG,IAAI,CAAA;KAC5B;;iBAVgB,MAAM;;6BAYjB,GAAG,EAAE;AACP,gBAAI,QAAQ,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACxD,gBAAI,KAAK,GAAG,IAAI,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;;AAEpD,eAAG,CAAC,OAAO,CAAC,eAAe,CAAC,GAAG,QAAQ,GAAG,KAAK,CAAA;;AAE/C,mBAAO,GAAG,CAAA;SACb;;;kCAEU,MAAM,EAAE,IAAI,EAAE;AACrB,mBAAO;AACH,sBAAM,EAAE,MAAM;AACd,mBAAG,EAAE,IAAI,CAAC,QAAQ,GAAG,IAAI;AACzB,uBAAO,EAAE;AACL,kCAAc,EAAE,kBAAkB;iBACrC;AACD,oBAAI,EAAE,MAAM;AACZ,uBAAO,EAAE,KAAK;aACjB,CAAA;SACJ;;;sCAEc,IAAI,EAAE,OAAO,EAAE;AAC1B,mBAAO;AACH,uBAAO,EAAE,OAAO;AAChB,oBAAI,EAAE,IAAI;AACV,4BAAY,EAAE,IAAI,CAAC,aAAa;AAChC,2BAAW,EAAE,IAAI,CAAC,YAAY;aACjC,CAAA;SACJ;;;oCAEY,MAAM,EAAE,IAAI,EAAE;;;AACvB,mBAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM,EAAK;AACpC,oBAAI,CAAC,GAAG,MAAK,IAAI,CAAC,MAAK,SAAS,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,CAAA;;AAE/C,sBAAK,YAAY,GAAG,CAAC,CAAC;AACtB,sBAAK,aAAa,GAAG,IAAI,CAAC;;AAE1B,qCAAM,CAAC,CAAC,CACH,IAAI,CAAC,UAAC,QAAQ,EAAK;AAChB,0BAAK,aAAa,GAAG,QAAQ,CAAC;AAC9B,2BAAO,OAAO,CAAC,MAAK,aAAa,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;iBAC3D,EAAE,UAAC,QAAQ,EAAK;AACb,0BAAK,aAAa,GAAG,QAAQ,CAAC;AAC9B,2BAAO,MAAM,CAAC,MAAK,aAAa,CAAC,QAAQ,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;iBAC3D,CAAC,CACD,KAAK,CAAC,UAAC,QAAQ,EAAK;AACjB,2BAAO,MAAM,CAAC,MAAK,aAAa,CAAC,QAAQ,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;iBAC3D,CAAC,CAAC;aACV,CAAC,CAAA;SACL;;;WA7DgB,MAAM;;;kBAAN,MAAM","file":"Client.js","sourcesContent":["/*\n * adyen-client\n *\n *\n * Copyright (c) 2015 Daniel Biedma Ramos\n * Licensed under the MIT license.\n */\n\nimport axios from 'axios'\n\nexport default class Client {\n    constructor (cfg) {\n        let {username, password, endpoint} = cfg\n\n        this.username = username\n        this.password = password\n        this.endpoint = endpoint\n\n        this._lastRequest = null\n        this._lastResponse = null\n    }\n\n    auth (req) {\n        var userPass = [this.username, this.password].join(':');\n        var token = new Buffer(userPass).toString('base64');\n\n        req.headers['Authorization'] = 'Basic ' + token\n\n        return req\n    }\n\n    createReq (params, path) {\n        return {\n            method: 'post',\n            url: this.endpoint + path,\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            data: params,\n            timeout: 20000\n        }\n    }\n\n    composeOutput (data, success) {\n        return {\n            success: success,\n            data: data,\n            lastResponse: this._lastResponse,\n            lastRequest: this._lastRequest\n        }\n    }\n\n    makeRequest (params, path) {\n        return new Promise((resolve, reject) => {\n            var r = this.auth(this.createReq(params, path))\n\n            this._lastRequest = r;\n            this._lastResponse = null;\n\n            axios(r)\n                .then((response) => {\n                    this._lastResponse = response;\n                    return resolve(this.composeOutput(response.data, true));\n                }, (response) => {\n                    this._lastResponse = response;\n                    return reject(this.composeOutput(response.data, false));\n                })\n                .catch((response) => {\n                    return reject(this.composeOutput(response.data, false));\n                });\n        })\n    };\n}\n"]}