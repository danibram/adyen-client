{"version":3,"sources":["../src/Adyen.js"],"names":[],"mappings":"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","file":"Adyen.js","sourcesContent":["/*\n * adyen-client\n *\n *\n * Copyright (c) 2015 Daniel Biedma Ramos\n * Licensed under the MIT license.\n */\n\nimport Client from './Client'\nimport moment from 'moment'\n\nconst Config = {\n    production: {\n        endpoint: '',\n        environment: 'production'\n    },\n    development: {\n        endpoint: 'https://pal-test.adyen.com/pal/servlet/',\n        environment: 'development'\n    }\n}\n\nconst Specs = {\n    authorizePayment: {\n        method: 'authorizePayment',\n        path: 'Payment/v12/authorise',\n        fields: {}\n    },\n    getRecurringData: {\n        method: 'listRecurringDetails',\n        path: 'Recurring/v12/listRecurringDetails',\n        fields: {}\n    },\n    disableRecurring: {\n        method: 'disableRecurring',\n        path: 'Recurring/v12/disable',\n        fields: {}\n    },\n    capture: {\n        method: 'capture',\n        path: 'Payment/v12/capture',\n        fields: {}\n    },\n    refund: {\n        method: 'refund',\n        path: 'Payment/v12/refund',\n        fields: {}\n    },\n    cancelOrRefund: {\n        method: 'cancelOrRefund',\n        path: 'Payment/v12/cancelOrRefund',\n        fields: {}\n    }\n}\n\nexport default class Adyen extends Client {\n\n    constructor (config, development) {\n        (development) ?\n        config = Object.assign(Config['development'], config)\n        : config = Object.assign(Config['production'], config)\n\n        super(config)\n        this.config = config\n    }\n\n    initCCForm () {\n        return Promise.resolve({\n           \"key\": this.config.frontKey,\n           \"generationTime\": moment().toISOString()\n       })\n    }\n\n    authorizePayment (params) {\n        return this._method(params, Specs.authorizePayment)\n    }\n\n    getRecurringData (params) {\n        return this._method(params, Specs.authorizePayment)\n    }\n    disableRecurring (params) {\n        return this._method(params, Specs.authorizePayment)\n    }\n    capture (params) {\n        return this._method(params, Specs.authorizePayment)\n    }\n    refund (params) {\n        return this._method(params, Specs.authorizePayment)\n    }\n    cancelOrRefund (params) {\n        return this._method(params, Specs.authorizePayment)\n    }\n\n    _method (params, cfg) {\n        let data = Object.assign({\n            merchantAccount: this.config.merchantAccount\n        }, params)\n\n        data = this._checkRequiredParams(data, cfg)\n        return this.makeRequest(data, cfg.path)\n    }\n\n    _checkRequiredParams (params, cfg) {\n        var inputKeys = Object.keys(params);\n\n        var requiredRemainParams = Object.keys(cfg.fields).filter((key)=> {\n            var cfgField = cfg.fields[key]\n\n            if (inputKeys.indexOf(key) < 0 && cfgField.required) {\n                return ky.field\n            }\n            return\n        })\n\n        if (requiredRemainParams.length > 0) {\n            return new Error('You dont send all required params. [' + requiredRemainParams.toString() + ']')\n        }\n\n        return params\n    }\n\n}\n"]}